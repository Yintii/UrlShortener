<!DOCTYPE html>
<html>
  <head>
    <title>Yintii | UrlShortener</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="google-adsense-account" content="ca-pub-4116671122586959">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbo-track': 'reload' %>

    <!-- rails-ujs via asset pipeline (UMD) so data-method works -->
    <%= javascript_include_tag 'rails-ujs', 'data-turbo-track': 'reload' %>
    <!-- Importmap for Rails/Stimulus -->
    <%= javascript_importmap_tags %>
  </head>

  <body>
    <% if flash[:notice] %>
      <div class="flash notice"><%= flash[:notice] %></div>
    <% end %>

    <% if flash[:alert] %>
      <div class="flash alert"><%= flash[:alert] %></div>
    <% end %>
    <% if flash[:success] %>
      <div class="flash success"><%= flash[:success] %></div>
    <% end %>

    <% if flash[:error] %>
      <div class="flash error"><%= flash[:error] %></div>
    <% end %>

    <header>
      <div id="brand">
        <%= link_to "Yintii", root_path %>
      </div>
      <div id="menu" class="flex flex-end" data-controller="navbar">
        <div id="hamburger-menu" data-action="click->navbar#toggle">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </div>
        <nav 
          class="hidden flex column"
          data-navbar-target="menu"
          >
          <div id="menu-x" data-action="click->navbar#toggle">
            <span class="x-line"></span>
            <span class="x-line"></span>
          </div>
          
          <%= link_to "Terms of Service", terms_of_service_path %>
          <%= link_to "About", about_path %>
          <% if user_signed_in? %>
            <%= link_to "Profile", user_profile_path %>
            <%= link_to "Logout", destroy_user_session_path, method: :delete %>
          <% else %>
            <%= link_to "Login", new_user_session_path %>
            <%= link_to "Sign up", new_user_registration_path %>
          <% end %>
        </nav>
      </div>
    </header>
    <main>
      <div id="main-content">
        <div id="mobile-and-banner-ads">
          <div class="desktop-only">
            <!--<img class="placeholder-ad" width="400" height="50" src="/assets/images/300x250.svg" alt="Advertisement Placeholder">-->
          </div>
          <div class="mobile-only">
            <!--<img class="placeholder-ad" width="350" height="90" src="/assets/images/728x90.svg" alt="Advertisement Placeholder">-->
          </div>  
        </div>
        <%= yield %>
        <% if current_page?(root_path) && !user_signed_in? %>
          <div class="container flex column align-center p-2 rounded-corners">
            <h2>Want to save your links?</h2>
            <p>Make an account and we'll save your history</p>
            <%= link_to "Sign Up", new_user_registration_path, id: "cta-signup", class: "bg-blue-yintii p-1 rounded-corners"  %>
          </div>
        <% elsif current_page?(root_path) %>
          <div class="container flex column align-center p-2 rounded-corners">
            <h2>Welcome back, <%= current_user.email %>!</h2>
            <p>Check your profile to see your link history</p>
            <%= link_to "Go to Profile", user_profile_path, id: "cta-profile", class: "bg-green-yintii p-1 rounded-corners"  %>
          </div>
        <% end %>
      </div>
      <div id="side-content">
        <div id="side-ads" class="desktop-only">
          <img class="placeholder-ad" width="300" height="600" src="/assets/images/300x600.svg" alt="Advertisement Placeholder">
        </div>
      </div>  
    </main>
  </body>
</html>

